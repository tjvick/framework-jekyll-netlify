---
# Feel free to add content and custom Front Matter to this file.
# To modify the layout, see https://jekyllrb.com/docs/themes/#overriding-theme-defaults

layout: home
stylesheet-hrefs:
  - /css/home.css
script-srcs:
---
<form class="booking-form">
  <label for="contact-name">Name</label>
  <input type="text" id="contact-name" name="name">

  <label for="contact-email">Email Address</label>
  <input type="text" id="contact-email" name="email">

  <label for="event-date">Date</label>
  <input type="text" id="event-date" name="eventDate">

  <label for="start-time">Start Time</label>
  <input type="text" id="start-time" name="startTime">

  <label for="end-time">End Time</label>
  <input type="text" id="end-time" name="endTime">

  <label for="n-eaters">Number of Eaters</label>
  <input type="text" id="n-eaters" name="nEaters">

  <button type="button">Book</button>
</form>

<button class="checkout" type="button">Checkout</button>


<script>

  document.querySelector('.booking-form button').addEventListener('click', () => {
    var myForm = document.querySelector('.booking-form');
    var formData = new FormData(myForm);
    var data = {};
    for (var pair of formData.entries()) {
      data[pair[0]] = pair[1];
    }
    console.log(data)
    fetch('http://localhost:9000/write', {
      method: 'POST',
      body: JSON.stringify(data),
      headers: new Headers({
        'content-type': 'text/plain',
      })
    })
    .then(res => res.json())
    .catch(error => console.error('Error:', error))
    .then(response => console.log(response));
  })


</script>

<script>

    document.querySelector('.checkout').addEventListener('click', () => {
      fetch('http://localhost:9000/checkout', {
        method: 'GET',
      })
      .then(res => res.json())
      .catch(error => console.error('Error:', error))
      .then(function(response) {
        window.location.replace(response.checkout_page_url);
      });
    })

  </script>